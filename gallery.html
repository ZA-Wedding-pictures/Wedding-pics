<script>
const API_KEY   = 'AIzaSyBcvZnPlBzF4G3pMG07x5wqUR0ADiXuiVQ';
const FOLDER_ID = '10IJzLTnmtDJKFBu4SE7c0p_G476TsBt_';

/* proper URL-encoded Drive query */
const q = encodeURIComponent(`'${FOLDER_ID}' in parents and trashed=false`);
const DRIVE_URL = `https://www.googleapis.com/drive/v3/files` +
                  `?q=${q}&fields=files(id,name,mimeType)` +
                  `&pageSize=1000&key=${API_KEY}`;

async function loadGallery() {
  const res = await fetch(DRIVE_URL);
  const { files = [] } = await res.json();

  const gal   = document.getElementById('gallery');
  const light = document.querySelector('#lightbox img');

  files.filter(f => f.mimeType.startsWith('image/')).forEach(f => {
    const src = `https://drive.google.com/uc?export=view&id=${f.id}`;
    const img = document.createElement('img');
    img.src = src; img.alt = f.name; img.loading = 'lazy';
    img.onclick = () => { light.src = src; document.getElementById('lightbox').style.display = 'flex'; };
    gal.appendChild(img);
  });

  document.getElementById('loading').remove();
  gal.hidden = false;
}
loadGallery();
</script>
